<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Wallpretty Animator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  </head>
  <body>
    <main class="app">
      <header class="chat-panel" aria-label="Chat controls">
        <input type="text" id="chatInput" placeholder="Send a message" autocomplete="off">
        <button id="sendButton" type="button">Send</button>
      </header>
      <ul class="chat-log" aria-live="polite"></ul>

      <section class="toolbar" aria-label="Brush controls">
        <div class="palette" role="list" aria-label="Preset brushes">
          <div class="brush" role="button" tabindex="0" data-active="False" id="whitebrush" style="background-color:rgb(255,255,255);" onclick="brushClick(this)">White</div>
          <div class="brush" role="button" tabindex="0" data-active="True"  id="redbrush" style="background-color:rgb(255,0,0);" onclick="brushClick(this)">Red</div>
          <div class="brush" role="button" tabindex="0" data-active="False" id="yellowbrush" style="background-color:rgb(255,255,0);" onclick="brushClick(this)">Yellow</div>
          <div class="brush" role="button" tabindex="0" data-active="False" id="greenbrush" style="background-color:rgb(0,255,0);" onclick="brushClick(this)">Green</div>
          <div class="brush" role="button" tabindex="0" data-active="False" id="lybluebrush" style="background-color:rgb(0,255,255);" onclick="brushClick(this)">LtBlue</div>
          <div class="brush" role="button" tabindex="0" data-active="False" id="bluebrush" style="background-color:rgb(0,0,255);" onclick="brushClick(this)">Blue</div>
          <div class="brush" role="button" tabindex="0" data-active="False" id="purplebrush" style="background-color:rgb(255,0,255);" onclick="brushClick(this)">Purple</div>
          <div class="brush" role="button" tabindex="0" data-active="False" id="orangebrush" style="background-color:rgb(255,165,0);" onclick="brushClick(this)">Orange</div>
          <div class="brush" role="button" tabindex="0" data-active="False" id="brownbrush" style="background-color:rgb(165,42,42);" onclick="brushClick(this)">Brown</div>
          <div class="brush" role="button" tabindex="0" data-active="False" id="blackbrush" style="background-color:rgb(0,0,0);" onclick="brushClick(this)">Black</div>
        </div>
        <div class="rgb-controls" aria-label="Custom RGB sliders">
          <label for="redBox">R
            <input name="redBox" id="redBox" type="number" min="0" max="255" value="0">
          </label>
          <label for="greenBox">G
            <input name="greenBox" id="greenBox" type="number" min="0" max="255" value="0">
          </label>
          <label for="blueBox">B
            <input name="blueBox" id="blueBox" type="number" min="0" max="255" value="0">
          </label>
        </div>
        <div class="save-panel" aria-label="Save and restore board states">
          <div class="save-form">
            <label for="saveNameInput">Save current lights as</label>
            <div class="save-actions">
              <input type="text" id="saveNameInput" placeholder="e.g. sunrise" autocomplete="off">
              <button type="button" id="saveSnapshotButton">Save Board</button>
            </div>
          </div>
          <div class="load-form">
            <label for="savedStateSelect">Saved states</label>
            <div class="load-actions">
              <select id="savedStateSelect" aria-label="Saved states list">
                <option value="" disabled selected>No saved states yet</option>
              </select>
              <button type="button" id="loadSnapshotButton">Load Selected</button>
              <button type="button" id="refreshSavesButton" aria-label="Refresh saved states" title="Refresh saved states">â†»</button>
            </div>
          </div>
          <p id="saveStatus" class="save-status" role="status" aria-live="polite"></p>
        </div>
      </section>

      <section class="board-wrapper" aria-label="Lightboard grid">
        <div id="lightboard" class="grid" role="grid" aria-label="10 by 20 lightboard" style="--board-width: {{ xs|length }}; --board-height: {{ ys|length }};">
          {% for y in ys %}
            {% for x in xs %}
              <div class="cell" role="gridcell" tabindex="0" data-x="{{ x }}" data-y="{{ y }}" data-coord="{{ x }}-{{ y }}" aria-label="Pixel {{ x }}, {{ y }}"></div>
            {% endfor %}
          {% endfor %}
        </div>
      </section>
    </main>

    <script src="{{ url_for('static', filename='pixels.js') }}"></script>
  </body>
</html>
